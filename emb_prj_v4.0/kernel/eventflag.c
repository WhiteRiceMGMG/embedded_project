/* eventflag.c                                    */
/********************************************************/
/* object    | カーネルイベントフラグ                   */
/* abstract  | イベントフラグ定義                       */
/* edit his  | 2025/12/20 テンプレート作成              */
/*           |                                          */
/********************************************************/
/********************************************************/
/* ヘッダーインクルード                                 */
/********************************************************/
#include <rpkernel.h>
#include <knldef.h> /* FLAGCB */

/********************************************************/
/* 内部公開マクロ                                       */
/********************************************************/
/* #define  u1g_SAMPLE_VAL                              */

/********************************************************/
/* 外部公開変数                                         */
/********************************************************/
/* u1 u1g_sample_val                                    */

/********************************************************/
/* 内部公開変数                                         */
/********************************************************/
FLGCB flgvb_tbl[CNF_MAX_FLAGID];

/********************************************************/
/* 外部公開関数定義                                     */
/********************************************************/

/********************************************************/
/* 関数   | ID tk_cre_flg( const T_CFLG *pk_cflg )      */
/* 説明   | イベントフラグ生成API                       */
/* 引数   | なし                                        */
/* 戻り値 | なし                                        */
/********************************************************/
ID tk_cre_flg( const T_CFLG *pk_cflg )
{
    ID   flgid;
    UINT intsts;

    DI(intsts);

    for(flgid = 0; flgcb_tbl[flgid].state != KS_NONEXIST; flgid++)
    {
        ;
    }

    if(flgid < CNF_MAX_FLGID)
    {
        flgcb_tbl[flgid].state = KS_EXIST;
        flgcb_tbl[flgid].flgptn = pl_cflg -> iflgptn;
        flgid++;
    }
    else
    {
        flgid = E_LIMIT;
    }

    EI(intsts);

    return flgid;
}

/********************************************************/
/* 関数   | u1 u1g_sample_function( void )              */
/* 説明   | ドライブモード取得関数宣言                  */
/*        | 初期化関数を実行しておくこと                */
/* 引数   | なし                                        */
/* 戻り値 | なし                                        */
/********************************************************/


/********************************************************/
/* 関数   | u1 u1g_sample_function( void )              */
/* 説明   | ドライブモード取得関数宣言                  */
/*        | 初期化関数を実行しておくこと                */
/* 引数   | なし                                        */
/* 戻り値 | なし                                        */
/********************************************************/

/********************************************************/
/* 関数   | u1 u1g_sample_function( void )              */
/* 説明   | ドライブモード取得関数宣言                  */
/*        | 初期化関数を実行しておくこと                */
/* 引数   | なし                                        */
/* 戻り値 | なし                                        */
/********************************************************/

/********************************************************/
/* 内部関数定義                                         */
/********************************************************/

/********************************************************/
/* 関数   | u1 u1g_sample_function( void )              */
/* 説明   | ドライブモード取得関数宣言                  */
/*        | 初期化関数を実行しておくこと                */
/* 引数   | なし                                        */
/* 戻り値 | なし                                        */
/********************************************************/

/********************************************************/
/* EOF                                                  */
/********************************************************/
